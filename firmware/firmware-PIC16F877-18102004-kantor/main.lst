MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001  title "main.asm   - Autoklavier Main Test"
                      00002 #define _version "0.1"
                      00003 
                      00004 ; Update History: 
                      00005 ; 1.12.2003 initial build 0.01a
                      00006 ; 10.12.2003 first release 0.01
                      00007 ; 10.1.2004  0.1 added serial interrupt, debuuged timer int
                      00008 ; 
                      00009 ; Autoklavierspieler für relais
                      00010 ;
                      00011 ; Author: Winfried Ritsch
                      00012 ; (c) ALGO 2003
                      00013 ;   
                      00014 ; Hardware Notes:
                      00015 ; build for PIC-Controller 16LF877A - 20Mhz
                      00016 ; special made for Autoklavier
                      00017 
                      00018 ; Hints:
                      00019 ; Clock 20 MHz -> 5.000.000 Instruction /sec 
                      00020 ; State Machine Programm
                      00021 ; Main loop sollte nie auf wait gehen und 
                      00022 ; 
                      00023 ; Code immer im Bank0 Status halten
                      00024 
                      00025 ; 1.) Directives
                      00026 
                      00027 ;       list p=16f877A   ; von MPLAP aus spezifiert
                      00028         list R=DEC       ; Basis der Zahlen ist default 10
                      00029 
                      00030 ; 2.) Header Includes                                                                                   
                                                                                                                            
                      00031 
                      00032         include "p16F877A.inc"     ; Prozessor defs 
                      00001         LIST
                      00002 ; P16F877A.INC  Standard Header File, Version 1.00    Microchip Technology, Inc.
                      00398         LIST
                      00033         include "hardware.inc"    ; my hardware defs
                      00001 ; My hardware definitions
                      00002 ; (c) ALGO 2003
                      00003 
                      00004 ; -------- Tasten in --------------
                      00005 
  00000000            00006 tpoti  EQU 0
                      00007 #define TPOTI PORTA,tpoti
                      00008 
                      00009 ; ---  RA1 == 1 -> addressmode ---
  00000001            00010 addrvalid EQU 1
                      00011 #define ADDRVALID PORTA,addrvalid
                      00012 
  00000002            00013 taddr1 EQU 2
                      00014 #define TADDR1 PORTA,taddr1
                      00015 
  00000003            00016 taddr2 EQU 3
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE  2
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00017 #define TADDR2 PORTA,taddr2
                      00018 
  00000004            00019 taddr3 EQU 4
                      00020 #define TADDR3 PORTA,taddr3
                      00021 
                      00022 ; ---  RA1 == 1 -> addressmode ---
  00000001            00023 testvalid EQU 1
                      00024 #define TESTVALID PORTA,testvalid
                      00025 
  00000003            00026 ttest equ 3
                      00027 #define TTEST PORTA,ttest
                      00028 
  00000004            00029 tnext equ 4
                      00030 #define TNEXT PORTA,tnext
                      00031 
                      00032 ; ------------ Relaisouts ------------
                      00033 
                      00034 ;----
  00000005            00035 rel0 EQU 5
                      00036 #define REL0 PORTA,rel0
                      00037 
  00000000            00038 rel1 EQU 0
                      00039 #define REL1 PORTE,rel1
                      00040 
  00000001            00041 rel2 EQU 1
                      00042 #define REL2 PORTE,rel2
                      00043 
  00000002            00044 rel3 EQU 2
                      00045 #define REL3 PORTE,rel3
                      00046 
  00000000            00047 rel4 EQU 0
                      00048 #define REL4 PORTC,rel4
                      00049 
  00000001            00050 rel5 EQU 1
                      00051 #define REL5 PORTC,rel5
                      00052 
  00000001            00053 rel6 EQU 1
                      00054 #define REL6 PORTD,rel6
                      00055 
  00000000            00056 rel7 EQU 0
                      00057 #define REL7 PORTD,rel7
                      00058 
  00000003            00059 rel8 EQU 3
                      00060 #define REL8 PORTC,rel8
                      00061 
  00000002            00062 rel9 EQU 2
                      00063 #define REL9 PORTC,rel9
                      00064 
  00000002            00065 rel10 EQU 2
                      00066 #define REL10 PORTD,rel10
                      00067 
  00000003            00068 rel11 EQU 3
                      00069 #define REL11 PORTD,rel11
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE  3
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00070 
  00000004            00071 rel12 EQU 4
                      00072 #define REL12 PORTC,rel12
                      00073 
  00000005            00074 rel13 EQU 5
                      00075 #define REL13 PORTC,rel13
                      00076 
  00000004            00077 rel14 EQU 4
                      00078 #define REL14 PORTD,rel14
                      00079 
  00000005            00080 rel15 EQU 5
                      00081 #define REL15 PORTD,rel15
                      00082 
  00000006            00083 rel16 EQU 6
                      00084 #define REL16 PORTD,rel16
                      00085 
  00000007            00086 rel17 EQU 7
                      00087 #define REL17 PORTD,rel17
                      00088 
  00000000            00089 rel18 EQU 0
                      00090 #define REL18 PORTB,rel18
                      00091 
  00000001            00092 rel19 EQU 1
                      00093 #define REL19 PORTB,rel19
                      00094 
  00000002            00095 rel20 EQU 2
                      00096 #define REL20 PORTB,rel20
                      00097 
  00000003            00098 rel21 EQU 3
                      00099 #define REL21 PORTB,rel21
                      00100 
  00000004            00101 rel22 EQU 4
                      00102 #define REL22 PORTB,rel22
                      00103 
  00000005            00104 rel23 EQU 5
                      00105 #define REL23 PORTB,rel23
                      00034 
                      00035 ; 3.)  Variablen and #defines
                      00036 
                      00037     include defines.inc
                      00001 ; algo 2003
                      00002 ; DEFINITIONS and PARAMETER
                      00003 
                      00004 ;minimale Velocity
                      00005 #define MINIMUM_VEL 5
                      00006 
                      00007 ; -- Timer setup ---
                      00008 
                      00009 ; delaycycles = (t*f/4)/2 = t * 20 * 10^6Hz/8 = t* 2,5 * 10^6 Hz
                      00010 ; delaycyles = (1/20 10^3Hz)* 2500 * 10^3 = 2500/20 = 125
                      00011 ; Prescaler 2 -> 125/0 = 125
                      00012 ; Load 256 - 125 = 100 (real 109 ???)
                      00013 ; 5MHz/(4*10) = ca. 100 kHz
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE  4
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00014 
                      00015 ; ----------- 100 microseconds interrupt
                      00016 ;#define USE_NPSA     (1 << PSA)  ; 20Khz
                      00017 #define USE_NPSA     (0) 
                      00018 #define PRE_SCALE    B'000'      ; 
                      00019 #define TMR0_LOAD    (256 - 241) ; experimentell festgestellt.
                      00020 #define PRE_COUNT  (4) ; erste decrement
                      00021 
                      00022 ; ---------- 50 microseconds  interrupt ----------
                      00023 ;#define USE_NPSA     (1 << PSA)  ; 20Khz
                      00024 ;;#define USE_NPSA     (0) 
                      00025 ;#define PRE_SCALE    B'000'      ; 
                      00026 ;#define TMR0_LOAD    (256 - 235) ; experimentell festgestellt.
                      00027 ;#define PRE_COUNT  (4) ; erste decrement
                      00028 
                      00029 ; ---------- NOTEN --------------
                      00030 
                      00031 ;notenstatus 
  00000000            00032 n_onbit    equ 0    
  00000001            00033 n_pulsbit  equ 1 ; whärend des anschlags (sonst haltephase)
                      00034                  ; nicht mehr verwendet da nicht notwendig
  00000002            00035 n_neubit   equ 2 ; neuer anschlag
  00000003            00036 n_haltebit equ 3 ; gesetzt wenn on und halte (fast interrupt)
  00000004            00037 n_syncbit  equ 4 ; im synchronmodus synchronspiel
                      00038 
                      00039 ; Livestatus
                      00040 
  00000000            00041 livebit equ 0
                      00042 #define  LIVEBIT systemstatus,livebit
                      00043 
                      00044 ; ---------- Serial in
  00000007            00045 status_bit equ 7
                      00046 #define STATUS_BIT addresse,status_bit
                      00047 
  00000004            00048 addr1_bit equ 4
                      00049 #define ADDR1_BIT addresse,addr1_bit
  00000005            00050 addr2_bit equ 5
                      00051 #define ADDR2_BIT addresse,addr2_bit
  00000006            00052 addr3_bit equ 6
                      00053 #define ADDR3_BIT addresse,addr3_bit
                      00054 
                      00055 ;#define ADDR_MASK B'01110000'
                      00056 #define ADDR_MASK (1<<addr1_bit)|(1<<addr2_bit)|(1<<addr3_bit)
                      00057 #define VALIDMASK (ADDR_MASK | (1 << status_bit))
                      00058 #define NOTENNRMASK B'00001111'
                      00059 
  00000001            00060 datavalid equ 1
                      00061 #define  DATAVALID systemstatus,datavalid
  00000002            00062 datawait  equ 2
                      00063 #define  DATAWAIT  systemstatus,datawait
                      00064 
                      00065 ; --- Debug out on RA1, RA2 (jumper für adresse) 
                      00066     
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE  5
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000001            00067 debugpin EQU 1
                      00068 #define  DEBUGPORT  PORTA
                      00069 #define  DEBUGPIN  DEBUGPORT, debugpin
                      00070 
  00000002            00071 debugpin1 EQU 2
                      00072 #define  DEBUGPORT1 PORTA
                      00073 #define  DEBUGPIN1  DEBUGPORT1, debugpin1
                      00074 
                      00075 ;#define  DEBUGTRIS ~((1 << debugpin) | (1 << debugpin1))
                      00076 ;#define  DEBUGTRIS ~(1 << debugpin)
                      00077 ;#define  DEBUGTRIS ~(1 << debugpin1)
                      00078 #define  DEBUGTRIS ~(0) ; DEBUG off
                      00079 
                      00080 #define SDEBUGPIN
                      00081 #define CDEBUGPIN
                      00082 #define SDEBUGPIN1
                      00083 #define CDEBUGPIN1
                      00084 
                      00085 ;#define SDEBUGPIN  bsf DEBUGPIN
                      00086 ;#define CDEBUGPIN  bcf DEBUGPIN
                      00087 ;#define SDEBUGPIN1 bsf DEBUGPIN1
                      00088 ;#define CDEBUGPIN1 bcf DEBUGPIN1
                      00089 
                      00090 
                      00038     include macros.inc
                      00001 ; Autoklavierspieler für relais
                      00002 ;  MACROS
                      00003 
                      00004 
                      00005 ; ------------ in interrupt haltepuls spielen ---------
                      00006 
                      00007 halte_note macro note, index2
                      00008   movlw  index2
                      00009   btfss  note, n_haltebit
                      00010   goto   $+6     ; nicht haltemode next
                      00011   btfsc  haltepuls0,haltebit  ; 2+ Befehle
                      00012   goto   $+3
                      00013   call   ClearPort2           ; 4 befehle
                      00014   goto   $+2
                      00015   call   SetPort2             ; 4 Befehle
                      00016  endm                         ; = 6
                      00017 
                      00018 ; ---------- Noten spielen ---------
                      00019 play_note macro note, puls, index
                      00020 
                      00021         movlw   index             ; 1 relais 1
                      00022    
                      00023         btfss   note, n_onbit     ; 2 note ein ?
                      00024         goto    $+11              ; 3 pnoteneu -> nein weiter
                      00025 
                      00026     decfsz  puls, f           ; 3 decrement anschlag
                      00027     goto    $+16               ; 4 pnoteend   
                      00028 
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE  6
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00029     ; bsf    note,n_haltebit    ; 4 haltemodus
                      00030     ; in den haltemodus
                      00031 
                      00032     bcf    note, n_onbit    ; 5
                      00033 
                      00034     ;bcf     STATUS,C       ; Index = nr * 2
                      00035     ;rlf     notenr, f      ; fuer vars und SetPort2, ClearPort2
                      00036     call ClearPort2
                      00037     
                      00038     movwf    relaisnr    
                      00039     decf     relaisnr, f
                      00040     decf     relaisnr, f
                      00041     movfw    relaisnr
                      00042     call    SetPort2
                      00043     
                      00044     ; set note +1
                      00045 
                      00046     goto   $+8 ; pnoteend     ; 5
                      00047 
                      00048 ;pnoteneu
                      00049     btfss  note, n_neubit    ; 4
                      00050     goto   $+6 ; pnoteend    ; 5
                      00051 
                      00052     bsf    note, n_onbit    ; 5
                      00053     bcf    note, n_neubit   ; 6
                      00054 
                      00055     bcf     STATUS,C       ; Index = nr * 2
                      00056     rlf     notenr, f      ; fuer vars und SetPort2, ClearPort2
                      00057 
                      00058     call   SetPort2         ; 9
                      00059 ; pnoteend
                      00060     endm                    ; min 3 max 9
                      00061 
                      00062 ; ------------- tasten indizierung
                      00063 
                      00064 
                      00065 tastenr_to_fsr macro Var
                      00066         movfw   tastennr
                      00067     movwf   FSR
                      00068         decf    FSR, f          ; 1-24 -> 0-23
                      00069     bcf     STATUS,C        ; * 2
                      00070     rlf     FSR, f
                      00071     movlw   LOW Var         ; Puls0 adresse 
                      00072         addwf   FSR, f          ; hinzuaddieren
                      00073     endm
                      00074 
                      00075 w_to_fsr macro Var
                      00076     movwf   FSR
                      00077 ;       decf    FSR, f          ; 0-23
                      00078     bcf     STATUS,C        ; * 2
                      00079     rlf     FSR, f
                      00080     movlw   LOW Var         ; Puls0 adresse 
                      00081         addwf   FSR, f          ; hinzuaddieren
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE  7
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00082     endm
                      00083 
                      00084 
                      00085 ; ------------- Interrupt helps
                      00086 
                      00087 ;       DISABLE_IRQ disable global irq 
                      00088 
                      00089 disable_irq MACRO
                      00090         LOCAL   stop_int
                      00091 stop_int        BCF     INTCON,GIE      ; disable global interrupt
                      00092                         BTFSC   INTCON,GIE      ; check if disabled 
                      00093                         GOTO    stop_int        ; nope, try again
                      00094         ENDM
                      00095         
                      00096 
                      00097 ;       ENABLE_IRQ enable global irq 
                      00098 
                      00099 enable_irq MACRO
                      00100         BSF     INTCON,GIE      ; enable global interrupt
                      00101         ENDM
                      00039     include variable.inc
                      00001 ;
                      00002 ; (c) ALGO 2003
                      00003 ; 
                      00004 ; Variablendefinition Autoklavier
                      00005 
                      00006 ; Statusbits für programm
                      00007   #define STEST schalter,0  ; Bit 0 Schalter TEST
                      00008   #define SNEXT schalter,1  ; Bit 1 Schalter NEXT
                      00009 
                      00010   #define DAUERTEST schalter,4 ; relais dauertest
                      00011   #define haltebit 0
                      00012 
                      00013       CBLOCK 0x20
                      00014 
                      00015   ; 4  interrupt saving register
  00000020            00016         _w, _status       
  00000022            00017         _fsr, _pclath
                      00018 
                      00019   ; 8 ---- tasteninterface 
  00000024            00020     tastennr    ; Nr der aktuellen Taste
  00000025            00021     schalter    ; Test Taste bitfeld
  00000026            00022     poti        ; potiwert
                      00023     
                      00024   ; 9 ----  Helpers 
  00000027            00025     relaisnr    ; Index fuer set/clear port
  00000028            00026     nindex      ; wo noten gezaehlt werden...              
                      00027  ;  12 timer vars
                      00028 
  00000029            00029     precount
  0000002A            00030     timecount0  ; count timer interrupts
  0000002B            00031         timecount1      ; 16Bit high 
                      00032 
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE  8
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00033 ; 16 haltepuls
                      00034 ;    hindex       ; index haltepuls
                      00035 ;    haltepuls0   ; haltpulshifter 
                      00036 ;    haltepuls1   ; 16 Bit
                      00037 ;    haltepuls2   ; 24 Bit
                      00038 
                      00039 ; 17 systemstatus
                      00040 
  0000002C            00041     systemstatus  ; livebit, datavalid
  0000002D            00042     addresse      ; Adresse
                      00043 
                      00044 ; 19 rs232
                      00045    
  0000002E            00046   inbyte ; empfangenes datum
  0000002F            00047   notenr ; aktuelle  notenr
  00000030            00048   velo   ; velocity der note
                      00049 
                      00050 ; + 48 = 56 noten
                      00051 
  00000031            00052     puls0         ; anschlag 
  00000032            00053     note0         ; status für note siehe defines for bits
  00000033            00054     puls1         ; anschlag 
  00000034            00055     note1         ; status für note siehe defines for bits
  00000035            00056     puls2         ; anschlag 
  00000036            00057     note2         ; status für note siehe defines for bits
  00000037            00058     puls3         ; anschlag 
  00000038            00059     note3         ; status für note siehe defines for bits
  00000039            00060     puls4         ; anschlag 
  0000003A            00061     note4         ; status für note siehe defines for bits
  0000003B            00062     puls5         ; anschlag 
  0000003C            00063     note5         ; status für note siehe defines for bits
  0000003D            00064     puls6        ; anschlag 
  0000003E            00065     note6         ; status für note siehe defines for bits
  0000003F            00066     puls7         ; anschlag 
  00000040            00067     note7         ; status für note siehe defines for bits
  00000041            00068     puls8         ; anschlag 
  00000042            00069     note8         ; status für note siehe defines for bits
  00000043            00070     puls9         ; anschlag 
  00000044            00071     note9         ; status für note siehe defines for bits
  00000045            00072     puls10         ; anschlag 
  00000046            00073     note10         ; status für note siehe defines for bits
  00000047            00074     puls11         ; anschlag 
  00000048            00075     note11         ; status für note siehe defines for bits
                      00076 ;    puls12         ; anschlag 
                      00077 ;    note12         ; status für note siehe defines for bits
                      00078 ;    puls13         ; anschlag 
                      00079 ;    note13         ; status für note siehe defines for bits
                      00080 ;    puls14         ; anschlag 
                      00081 ;    note14         ; status für note siehe defines for bits
                      00082 ;    puls15         ; anschlag 
                      00083 ;    note15         ; status für note siehe defines for bits
                      00084 ;    puls16        ; anschlag 
                      00085 ;    note16         ; status für note siehe defines for bits
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE  9
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00086 ;    puls17         ; anschlag 
                      00087 ;    note17         ; status für note siehe defines for bits
                      00088 ;    puls18         ; anschlag 
                      00089 ;    note18         ; status für note siehe defines for bits
                      00090 ;    puls19         ; anschlag 
                      00091 ;    note19         ; status für note siehe defines for bits
                      00092 ;    puls20         ; anschlag 
                      00093 ;    note20         ; status für note siehe defines for bits
                      00094 ;    puls21         ; anschlag 
                      00095 ;    note21         ; status für note siehe defines for bits
                      00096 ;    puls22         ; anschlag 
                      00097 ;    note22         ; status für note siehe defines for bits
                      00098 ;    puls23         ; anschlag 
                      00099 ;    note23         ; status für note siehe defines for bits
                      00100 
                      00101         endc
                      00102 
                      00103 
                      00040    
                      00041 
                      00042 ; 4) RESET und Interrupt Code
                      00043 
0000                  00044         org 0x000
0000                  00045 RESET                   ; start at reset vector
0000   0000           00046         NOP                 ; for debugger
0001   0183           00047     clrf STATUS ; ensure to be bank 0
0002   018A           00048     clrf PCLATH ; ensure no page bits set (before goto)
0003   29BB           00049         goto Start
                      00050 
0004                  00051         org 0x004               ; --- Interrupt service routine
0004   286B           00052         goto Int
                      00053 
                      00054     include "relaytab.inc" ; muss innerhalb einer org 0xFF sein
                      00001 ; 5 Befehle fuer table lookup und und setport
                      00002  ; w ist index
0005                  00003 ClearPort
0005   1003           00004     bcf   STATUS,C
0006   0D27           00005     rlf   relaisnr, w  ; *2 als index nach w
0007                  00006 ClearPort2          ; wenn index schon * 2 ist dann nur 3 befehle
0007   0782           00007     addwf PCL, f
                      00008 
0008   1685           00009     bsf REL0
0009   0008           00010     return
                      00011 
000A   1409           00012     bsf REL1
000B   0008           00013     return
                      00014 
000C   1489           00015     bsf REL2
000D   0008           00016     return
                      00017 
000E   1509           00018     bsf REL3
000F   0008           00019     return
                      00020 
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 10
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0010   1407           00021     bsf REL4
0011   0008           00022     return
                      00023 
0012   1487           00024     bsf REL5
0013   0008           00025     return
                      00026 
0014   1488           00027     bsf REL6
0015   0008           00028     return
                      00029 
0016   1408           00030     bsf REL7
0017   0008           00031     return
                      00032 
0018   1587           00033     bsf REL8
0019   0008           00034     return
                      00035 
001A   1507           00036     bsf REL9
001B   0008           00037     return
                      00038 
001C   1508           00039     bsf REL10
001D   0008           00040     return
                      00041 
001E   1588           00042     bsf REL11
001F   0008           00043     return
                      00044 
0020   1607           00045     bsf REL12
0021   0008           00046     return
                      00047 
0022   1687           00048     bsf REL13
0023   0008           00049     return
                      00050 
0024   1608           00051     bsf REL14
0025   0008           00052     return
                      00053 
0026   1688           00054     bsf REL15
0027   0008           00055     return
                      00056 
0028   1708           00057     bsf REL16
0029   0008           00058     return
                      00059 
002A   1788           00060     bsf REL17
002B   0008           00061     return
                      00062 
002C   1406           00063     bsf REL18
002D   0008           00064     return
                      00065 
002E   1486           00066     bsf REL19
002F   0008           00067     return
                      00068 
0030   1506           00069     bsf REL20
0031   0008           00070     return
                      00071 
0032   1586           00072     bsf REL21
0033   0008           00073     return
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 11
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00074 
0034   1606           00075     bsf REL22
0035   0008           00076     return
                      00077 
0036   1686           00078     bsf REL23
0037   0008           00079     return
                      00080 
                      00081 
                      00082  ; 5 Befehle fuer table lookup und und clear port
                      00083  ; w ist index
                      00084 
0038                  00085 SetPort
0038   1003           00086     bcf   STATUS,C
0039   0D27           00087     rlf   relaisnr, w  ; *2 als index nach w
003A                  00088 SetPort2          ; wenn index schon * 2 ist dann nur 3 befehle
003A   0782           00089     addwf PCL, f
                      00090 
003B   1285           00091     bcf REL0
003C   0008           00092     return
                      00093 
003D   1009           00094     bcf REL1
003E   0008           00095     return
                      00096 
003F   1089           00097     bcf REL2
0040   0008           00098     return
                      00099 
0041   1109           00100     bcf REL3
0042   0008           00101     return
                      00102 
0043   1007           00103     bcf REL4
0044   0008           00104     return
                      00105 
0045   1087           00106     bcf REL5
0046   0008           00107     return
                      00108 
0047   1088           00109     bcf REL6
0048   0008           00110     return
                      00111 
0049   1008           00112     bcf REL7
004A   0008           00113     return
                      00114 
004B   1187           00115     bcf REL8
004C   0008           00116     return
                      00117 
004D   1107           00118     bcf REL9
004E   0008           00119     return
                      00120 
004F   1108           00121     bcf REL10
0050   0008           00122     return
                      00123 
0051   1188           00124     bcf REL11
0052   0008           00125     return
                      00126 
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 12
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0053   1207           00127     bcf REL12
0054   0008           00128     return
                      00129 
0055   1287           00130     bcf REL13
0056   0008           00131     return
                      00132 
0057   1208           00133     bcf REL14
0058   0008           00134     return
                      00135 
0059   1288           00136     bcf REL15
005A   0008           00137     return
                      00138 
005B   1308           00139     bcf REL16
005C   0008           00140     return
                      00141 
005D   1388           00142     bcf REL17
005E   0008           00143     return
                      00144 
005F   1006           00145     bcf REL18
0060   0008           00146     return
                      00147 
0061   1086           00148     bcf REL19
0062   0008           00149     return
                      00150 
0063   1106           00151     bcf REL20
0064   0008           00152     return
                      00153 
0065   1186           00154     bcf REL21
0066   0008           00155     return
                      00156 
0067   1206           00157     bcf REL22
0068   0008           00158     return
                      00159 
0069   1286           00160     bcf REL23
006A   0008           00161     return
                      00055 
                      00056 ; v2 not needed  include "haltetab.inc" ; muss innerhalb einer org 0xFF sein
                      00057 
                      00058     include "intimer.inc"
                      00001 ; autoklavier
                      00002 ; algo 2003
                      00003 ; now adapted for 2004
                      00004 
                      00005 ; ----- INTERRUPT ---------
006B                  00006 Int
006B   00A0           00007         movwf  _w                ; -- Save the Context Registers
006C   0803           00008         movf   STATUS, w
006D   1283           00009         bcf    STATUS, RP0       ;  Change to Bank 0
006E   1303           00010         bcf    STATUS, RP1
006F   00A1           00011         movwf  _status
0070   0804           00012         movf   FSR, w
0071   00A2           00013         movwf  _fsr
                      00014 ;       movf   PCLATH, w        ; only need if code > 1 Page (2048)
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 13
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00015 ;       movwf  _pclath          
                      00016 ;       clrf   PCLATH
                      00017 
                      00018 
                      00019 
                      00020 ; --------- interrupt dispatcher ---------------
                      00021 ; --- first serial interrupt, because its more often
                      00022 
0072                  00023 int_serial_rx
0072   1E8C           00024         btfss   PIR1,RCIF       ; test if serial receive irq
0073   2875           00025     goto    int_timer   ; nope check next
                      00026 
                      00027 ; ----------- rx irq ------------------------------
0074   21C3           00028         call SerialIn
                      00029 
                      00030 ; ----------- Timer Intterrupt --------------------
                      00031 
0075                  00032 int_timer
0075   1D0B           00033         btfss   INTCON, T0IF ; do we have a Timer Interrupt
0076   2975           00034         goto    IntEnd           ; no -> EndofInt
                      00035 
0077   110B           00036         bcf     INTCON, T0IF     ; Timer-Int register clear
0078   300F           00037         movlw   TMR0_LOAD        ; start timer again
0079   0081           00038         movwf   TMR0
                      00039 
                      00040 ; ---- debug out on REL0 ist 20MHz takt ---
                      00041         SDEBUGPIN
                      00042 
                      00043 ; --------- Zeit --------------
                      00044 ;  bei 20Khz timer :
                      00045 ;  1000/4 = 256 Befehle max !!!!
                      00046 ;  main programm:  noch 10 befehle bei 20Khz + interrupt -> 240
                      00047 ;  10 pro note
                      00048 
                      00049 ; ------- do haltepuls - old now secon relais
                      00050 ;   bcf   STATUS, C             ;  5-6
                      00051 ;   btfsc  haltepuls2, 7
                      00052 ;   bsf   STATUS, C
                      00053 ;   rlf    haltepuls0, f
                      00054 ;   rlf    haltepuls1, f
                      00055 ;   rlf    haltepuls2, f
                      00056 ;
                      00057 
                      00058 ; ---- debug ausgang
                      00059 ;   btfsc  puls0, n_onbit  ; 3 Befehle
                      00060 ;   goto   $+3
                      00061 ;   bcf    DEBUGPIN1
                      00062 ;   goto   $+2
                      00063 ;   bsf    DEBUGPIN1
                      00064 
                      00065 ; ------------ FAST LOOP ---------------
                      00066 ; -------------- noten halten ----------
                      00067 
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 14
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00068 ;   halte_note note0, 0
                      00069 ;   halte_note note1, 2
                      00070 ;   halte_note note2, 4
                      00071 ;   halte_note note3, 6
                      00072 ;   halte_note note4, 8
                      00073 ;   halte_note note5, 10
                      00074 ;   halte_note note6, 12
                      00075 ;   halte_note note7, 14
                      00076 ;   halte_note note8, 16
                      00077 ;   halte_note note9, 18
                      00078 ;   halte_note note10, 20
                      00079 ;   halte_note note11, 22
                      00080 ;   halte_note note12, 24
                      00081 ;   halte_note note13, 26
                      00082 ;   halte_note note14, 28
                      00083 ;   halte_note note15, 30
                      00084 ;   halte_note note16, 32
                      00085 ;   halte_note note17, 34
                      00086 ;   halte_note note18, 36
                      00087 ;   halte_note note19, 38
                      00088 ;   halte_note note20, 40
                      00089 ;   halte_note note21, 42
                      00090 ;   halte_note note22, 44
                      00091 ;   halte_note note23, 46
                      00092 ; 
                      00093 ; ----------------- Prescale -----------------
007A                  00094 pre_tick        ; / 8 => 0.4ms
007A   0BA9           00095   decfsz        precount, f     ; count timer
007B   2975           00096   goto time_end         ; notreached -> end
                      00097 
007C   3004           00098   movlw   PRE_COUNT   
007D   00A9           00099   movwf   precount  
                      00100 ; ----------------------------------------
                      00101 
                      00102 ; --------------- note spielen ------------------------
                      00103 ; ein -> setze pulswert und dann n_neubit
                      00104 ; aus -> loesche n_onbit
                      00105      play_note note0, puls0, 2
                          M 
007E   3002               M         movlw   2                 ; 1 relais 1
                          M    
007F   1C32               M         btfss   note0, n_onbit    ; 2 note ein ?
0080   288B               M         goto    $+11              ; 3 pnoteneu -> nein weiter
                          M 
0081   0BB1               M     decfsz  puls0, f          ; 3 decrement anschlag
0082   2892               M     goto    $+16               ; 4 pnoteend   
                          M 
                          M     ; bsf    note,n_haltebit    ; 4 haltemodus
                          M     ; in den haltemodus
                          M 
0083   1032               M     bcf    note0, n_onbit   ; 5
                          M 
                          M     ;bcf     STATUS,C       ; Index = nr * 2
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 15
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M     ;rlf     notenr, f      ; fuer vars und SetPort2, ClearPort2
0084   2007               M     call ClearPort2
                          M     
0085   00A7               M     movwf    relaisnr    
0086   03A7               M     decf     relaisnr, f
0087   03A7               M     decf     relaisnr, f
0088   0827               M     movfw    relaisnr
0089   203A               M     call    SetPort2
                          M     
                          M     ; set note +1
                          M 
008A   2892               M     goto   $+8 ; pnoteend     ; 5
                          M 
                          M ;pnoteneu
008B   1D32               M     btfss  note0, n_neubit   ; 4
008C   2892               M     goto   $+6 ; pnoteend    ; 5
                          M 
008D   1432               M     bsf    note0, n_onbit   ; 5
008E   1132               M     bcf    note0, n_neubit  ; 6
                          M 
008F   1003               M     bcf     STATUS,C       ; Index = nr * 2
0090   0DAF               M     rlf     notenr, f      ; fuer vars und SetPort2, ClearPort2
                          M 
0091   203A               M     call   SetPort2         ; 9
                          M ; pnoteend
                      00106      play_note note1, puls1, 6
                          M 
0092   3006               M         movlw   6                 ; 1 relais 1
                          M    
0093   1C34               M         btfss   note1, n_onbit    ; 2 note ein ?
0094   289F               M         goto    $+11              ; 3 pnoteneu -> nein weiter
                          M 
0095   0BB3               M     decfsz  puls1, f          ; 3 decrement anschlag
0096   28A6               M     goto    $+16               ; 4 pnoteend   
                          M 
                          M     ; bsf    note,n_haltebit    ; 4 haltemodus
                          M     ; in den haltemodus
                          M 
0097   1034               M     bcf    note1, n_onbit   ; 5
                          M 
                          M     ;bcf     STATUS,C       ; Index = nr * 2
                          M     ;rlf     notenr, f      ; fuer vars und SetPort2, ClearPort2
0098   2007               M     call ClearPort2
                          M     
0099   00A7               M     movwf    relaisnr    
009A   03A7               M     decf     relaisnr, f
009B   03A7               M     decf     relaisnr, f
009C   0827               M     movfw    relaisnr
009D   203A               M     call    SetPort2
                          M     
                          M     ; set note +1
                          M 
009E   28A6               M     goto   $+8 ; pnoteend     ; 5
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 16
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M 
                          M ;pnoteneu
009F   1D34               M     btfss  note1, n_neubit   ; 4
00A0   28A6               M     goto   $+6 ; pnoteend    ; 5
                          M 
00A1   1434               M     bsf    note1, n_onbit   ; 5
00A2   1134               M     bcf    note1, n_neubit  ; 6
                          M 
00A3   1003               M     bcf     STATUS,C       ; Index = nr * 2
00A4   0DAF               M     rlf     notenr, f      ; fuer vars und SetPort2, ClearPort2
                          M 
00A5   203A               M     call   SetPort2         ; 9
                          M ; pnoteend
                      00107      play_note note2, puls2, 10
                          M 
00A6   300A               M         movlw   10                ; 1 relais 1
                          M    
00A7   1C36               M         btfss   note2, n_onbit    ; 2 note ein ?
00A8   28B3               M         goto    $+11              ; 3 pnoteneu -> nein weiter
                          M 
00A9   0BB5               M     decfsz  puls2, f          ; 3 decrement anschlag
00AA   28BA               M     goto    $+16               ; 4 pnoteend   
                          M 
                          M     ; bsf    note,n_haltebit    ; 4 haltemodus
                          M     ; in den haltemodus
                          M 
00AB   1036               M     bcf    note2, n_onbit   ; 5
                          M 
                          M     ;bcf     STATUS,C       ; Index = nr * 2
                          M     ;rlf     notenr, f      ; fuer vars und SetPort2, ClearPort2
00AC   2007               M     call ClearPort2
                          M     
00AD   00A7               M     movwf    relaisnr    
00AE   03A7               M     decf     relaisnr, f
00AF   03A7               M     decf     relaisnr, f
00B0   0827               M     movfw    relaisnr
00B1   203A               M     call    SetPort2
                          M     
                          M     ; set note +1
                          M 
00B2   28BA               M     goto   $+8 ; pnoteend     ; 5
                          M 
                          M ;pnoteneu
00B3   1D36               M     btfss  note2, n_neubit   ; 4
00B4   28BA               M     goto   $+6 ; pnoteend    ; 5
                          M 
00B5   1436               M     bsf    note2, n_onbit   ; 5
00B6   1136               M     bcf    note2, n_neubit  ; 6
                          M 
00B7   1003               M     bcf     STATUS,C       ; Index = nr * 2
00B8   0DAF               M     rlf     notenr, f      ; fuer vars und SetPort2, ClearPort2
                          M 
00B9   203A               M     call   SetPort2         ; 9
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 17
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M ; pnoteend
                      00108      play_note note3, puls3, 14
                          M 
00BA   300E               M         movlw   14                ; 1 relais 1
                          M    
00BB   1C38               M         btfss   note3, n_onbit    ; 2 note ein ?
00BC   28C7               M         goto    $+11              ; 3 pnoteneu -> nein weiter
                          M 
00BD   0BB7               M     decfsz  puls3, f          ; 3 decrement anschlag
00BE   28CE               M     goto    $+16               ; 4 pnoteend   
                          M 
                          M     ; bsf    note,n_haltebit    ; 4 haltemodus
                          M     ; in den haltemodus
                          M 
00BF   1038               M     bcf    note3, n_onbit   ; 5
                          M 
                          M     ;bcf     STATUS,C       ; Index = nr * 2
                          M     ;rlf     notenr, f      ; fuer vars und SetPort2, ClearPort2
00C0   2007               M     call ClearPort2
                          M     
00C1   00A7               M     movwf    relaisnr    
00C2   03A7               M     decf     relaisnr, f
00C3   03A7               M     decf     relaisnr, f
00C4   0827               M     movfw    relaisnr
00C5   203A               M     call    SetPort2
                          M     
                          M     ; set note +1
                          M 
00C6   28CE               M     goto   $+8 ; pnoteend     ; 5
                          M 
                          M ;pnoteneu
00C7   1D38               M     btfss  note3, n_neubit   ; 4
00C8   28CE               M     goto   $+6 ; pnoteend    ; 5
                          M 
00C9   1438               M     bsf    note3, n_onbit   ; 5
00CA   1138               M     bcf    note3, n_neubit  ; 6
                          M 
00CB   1003               M     bcf     STATUS,C       ; Index = nr * 2
00CC   0DAF               M     rlf     notenr, f      ; fuer vars und SetPort2, ClearPort2
                          M 
00CD   203A               M     call   SetPort2         ; 9
                          M ; pnoteend
                      00109      play_note note4, puls4, 18
                          M 
00CE   3012               M         movlw   18                ; 1 relais 1
                          M    
00CF   1C3A               M         btfss   note4, n_onbit    ; 2 note ein ?
00D0   28DB               M         goto    $+11              ; 3 pnoteneu -> nein weiter
                          M 
00D1   0BB9               M     decfsz  puls4, f          ; 3 decrement anschlag
00D2   28E2               M     goto    $+16               ; 4 pnoteend   
                          M 
                          M     ; bsf    note,n_haltebit    ; 4 haltemodus
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 18
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M     ; in den haltemodus
                          M 
00D3   103A               M     bcf    note4, n_onbit   ; 5
                          M 
                          M     ;bcf     STATUS,C       ; Index = nr * 2
                          M     ;rlf     notenr, f      ; fuer vars und SetPort2, ClearPort2
00D4   2007               M     call ClearPort2
                          M     
00D5   00A7               M     movwf    relaisnr    
00D6   03A7               M     decf     relaisnr, f
00D7   03A7               M     decf     relaisnr, f
00D8   0827               M     movfw    relaisnr
00D9   203A               M     call    SetPort2
                          M     
                          M     ; set note +1
                          M 
00DA   28E2               M     goto   $+8 ; pnoteend     ; 5
                          M 
                          M ;pnoteneu
00DB   1D3A               M     btfss  note4, n_neubit   ; 4
00DC   28E2               M     goto   $+6 ; pnoteend    ; 5
                          M 
00DD   143A               M     bsf    note4, n_onbit   ; 5
00DE   113A               M     bcf    note4, n_neubit  ; 6
                          M 
00DF   1003               M     bcf     STATUS,C       ; Index = nr * 2
00E0   0DAF               M     rlf     notenr, f      ; fuer vars und SetPort2, ClearPort2
                          M 
00E1   203A               M     call   SetPort2         ; 9
                          M ; pnoteend
                      00110      play_note note5, puls5, 22
                          M 
00E2   3016               M         movlw   22                ; 1 relais 1
                          M    
00E3   1C3C               M         btfss   note5, n_onbit    ; 2 note ein ?
00E4   28EF               M         goto    $+11              ; 3 pnoteneu -> nein weiter
                          M 
00E5   0BBB               M     decfsz  puls5, f          ; 3 decrement anschlag
00E6   28F6               M     goto    $+16               ; 4 pnoteend   
                          M 
                          M     ; bsf    note,n_haltebit    ; 4 haltemodus
                          M     ; in den haltemodus
                          M 
00E7   103C               M     bcf    note5, n_onbit   ; 5
                          M 
                          M     ;bcf     STATUS,C       ; Index = nr * 2
                          M     ;rlf     notenr, f      ; fuer vars und SetPort2, ClearPort2
00E8   2007               M     call ClearPort2
                          M     
00E9   00A7               M     movwf    relaisnr    
00EA   03A7               M     decf     relaisnr, f
00EB   03A7               M     decf     relaisnr, f
00EC   0827               M     movfw    relaisnr
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 19
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00ED   203A               M     call    SetPort2
                          M     
                          M     ; set note +1
                          M 
00EE   28F6               M     goto   $+8 ; pnoteend     ; 5
                          M 
                          M ;pnoteneu
00EF   1D3C               M     btfss  note5, n_neubit   ; 4
00F0   28F6               M     goto   $+6 ; pnoteend    ; 5
                          M 
00F1   143C               M     bsf    note5, n_onbit   ; 5
00F2   113C               M     bcf    note5, n_neubit  ; 6
                          M 
00F3   1003               M     bcf     STATUS,C       ; Index = nr * 2
00F4   0DAF               M     rlf     notenr, f      ; fuer vars und SetPort2, ClearPort2
                          M 
00F5   203A               M     call   SetPort2         ; 9
                          M ; pnoteend
                      00111      play_note note6, puls6, 26
                          M 
00F6   301A               M         movlw   26                ; 1 relais 1
                          M    
00F7   1C3E               M         btfss   note6, n_onbit    ; 2 note ein ?
00F8   2903               M         goto    $+11              ; 3 pnoteneu -> nein weiter
                          M 
00F9   0BBD               M     decfsz  puls6, f          ; 3 decrement anschlag
00FA   290A               M     goto    $+16               ; 4 pnoteend   
                          M 
                          M     ; bsf    note,n_haltebit    ; 4 haltemodus
                          M     ; in den haltemodus
                          M 
00FB   103E               M     bcf    note6, n_onbit   ; 5
                          M 
                          M     ;bcf     STATUS,C       ; Index = nr * 2
                          M     ;rlf     notenr, f      ; fuer vars und SetPort2, ClearPort2
00FC   2007               M     call ClearPort2
                          M     
00FD   00A7               M     movwf    relaisnr    
00FE   03A7               M     decf     relaisnr, f
00FF   03A7               M     decf     relaisnr, f
0100   0827               M     movfw    relaisnr
0101   203A               M     call    SetPort2
                          M     
                          M     ; set note +1
                          M 
0102   290A               M     goto   $+8 ; pnoteend     ; 5
                          M 
                          M ;pnoteneu
0103   1D3E               M     btfss  note6, n_neubit   ; 4
0104   290A               M     goto   $+6 ; pnoteend    ; 5
                          M 
0105   143E               M     bsf    note6, n_onbit   ; 5
0106   113E               M     bcf    note6, n_neubit  ; 6
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 20
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M 
0107   1003               M     bcf     STATUS,C       ; Index = nr * 2
0108   0DAF               M     rlf     notenr, f      ; fuer vars und SetPort2, ClearPort2
                          M 
0109   203A               M     call   SetPort2         ; 9
                          M ; pnoteend
                      00112      play_note note7, puls7, 30
                          M 
010A   301E               M         movlw   30                ; 1 relais 1
                          M    
010B   1C40               M         btfss   note7, n_onbit    ; 2 note ein ?
010C   2917               M         goto    $+11              ; 3 pnoteneu -> nein weiter
                          M 
010D   0BBF               M     decfsz  puls7, f          ; 3 decrement anschlag
010E   291E               M     goto    $+16               ; 4 pnoteend   
                          M 
                          M     ; bsf    note,n_haltebit    ; 4 haltemodus
                          M     ; in den haltemodus
                          M 
010F   1040               M     bcf    note7, n_onbit   ; 5
                          M 
                          M     ;bcf     STATUS,C       ; Index = nr * 2
                          M     ;rlf     notenr, f      ; fuer vars und SetPort2, ClearPort2
0110   2007               M     call ClearPort2
                          M     
0111   00A7               M     movwf    relaisnr    
0112   03A7               M     decf     relaisnr, f
0113   03A7               M     decf     relaisnr, f
0114   0827               M     movfw    relaisnr
0115   203A               M     call    SetPort2
                          M     
                          M     ; set note +1
                          M 
0116   291E               M     goto   $+8 ; pnoteend     ; 5
                          M 
                          M ;pnoteneu
0117   1D40               M     btfss  note7, n_neubit   ; 4
0118   291E               M     goto   $+6 ; pnoteend    ; 5
                          M 
0119   1440               M     bsf    note7, n_onbit   ; 5
011A   1140               M     bcf    note7, n_neubit  ; 6
                          M 
011B   1003               M     bcf     STATUS,C       ; Index = nr * 2
011C   0DAF               M     rlf     notenr, f      ; fuer vars und SetPort2, ClearPort2
                          M 
011D   203A               M     call   SetPort2         ; 9
                          M ; pnoteend
                      00113      play_note note8, puls8, 34
                          M 
011E   3022               M         movlw   34                ; 1 relais 1
                          M    
011F   1C42               M         btfss   note8, n_onbit    ; 2 note ein ?
0120   292B               M         goto    $+11              ; 3 pnoteneu -> nein weiter
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 21
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M 
0121   0BC1               M     decfsz  puls8, f          ; 3 decrement anschlag
0122   2932               M     goto    $+16               ; 4 pnoteend   
                          M 
                          M     ; bsf    note,n_haltebit    ; 4 haltemodus
                          M     ; in den haltemodus
                          M 
0123   1042               M     bcf    note8, n_onbit   ; 5
                          M 
                          M     ;bcf     STATUS,C       ; Index = nr * 2
                          M     ;rlf     notenr, f      ; fuer vars und SetPort2, ClearPort2
0124   2007               M     call ClearPort2
                          M     
0125   00A7               M     movwf    relaisnr    
0126   03A7               M     decf     relaisnr, f
0127   03A7               M     decf     relaisnr, f
0128   0827               M     movfw    relaisnr
0129   203A               M     call    SetPort2
                          M     
                          M     ; set note +1
                          M 
012A   2932               M     goto   $+8 ; pnoteend     ; 5
                          M 
                          M ;pnoteneu
012B   1D42               M     btfss  note8, n_neubit   ; 4
012C   2932               M     goto   $+6 ; pnoteend    ; 5
                          M 
012D   1442               M     bsf    note8, n_onbit   ; 5
012E   1142               M     bcf    note8, n_neubit  ; 6
                          M 
012F   1003               M     bcf     STATUS,C       ; Index = nr * 2
0130   0DAF               M     rlf     notenr, f      ; fuer vars und SetPort2, ClearPort2
                          M 
0131   203A               M     call   SetPort2         ; 9
                          M ; pnoteend
                      00114      play_note note9, puls9, 38
                          M 
0132   3026               M         movlw   38                ; 1 relais 1
                          M    
0133   1C44               M         btfss   note9, n_onbit    ; 2 note ein ?
0134   293F               M         goto    $+11              ; 3 pnoteneu -> nein weiter
                          M 
0135   0BC3               M     decfsz  puls9, f          ; 3 decrement anschlag
0136   2946               M     goto    $+16               ; 4 pnoteend   
                          M 
                          M     ; bsf    note,n_haltebit    ; 4 haltemodus
                          M     ; in den haltemodus
                          M 
0137   1044               M     bcf    note9, n_onbit   ; 5
                          M 
                          M     ;bcf     STATUS,C       ; Index = nr * 2
                          M     ;rlf     notenr, f      ; fuer vars und SetPort2, ClearPort2
0138   2007               M     call ClearPort2
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 22
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M     
0139   00A7               M     movwf    relaisnr    
013A   03A7               M     decf     relaisnr, f
013B   03A7               M     decf     relaisnr, f
013C   0827               M     movfw    relaisnr
013D   203A               M     call    SetPort2
                          M     
                          M     ; set note +1
                          M 
013E   2946               M     goto   $+8 ; pnoteend     ; 5
                          M 
                          M ;pnoteneu
013F   1D44               M     btfss  note9, n_neubit   ; 4
0140   2946               M     goto   $+6 ; pnoteend    ; 5
                          M 
0141   1444               M     bsf    note9, n_onbit   ; 5
0142   1144               M     bcf    note9, n_neubit  ; 6
                          M 
0143   1003               M     bcf     STATUS,C       ; Index = nr * 2
0144   0DAF               M     rlf     notenr, f      ; fuer vars und SetPort2, ClearPort2
                          M 
0145   203A               M     call   SetPort2         ; 9
                          M ; pnoteend
                      00115      play_note note10, puls10, 42
                          M 
0146   302A               M         movlw   42                ; 1 relais 1
                          M    
0147   1C46               M         btfss   note10, n_onbit   ; 2 note ein ?
0148   2953               M         goto    $+11              ; 3 pnoteneu -> nein weiter
                          M 
0149   0BC5               M     decfsz  puls10, f         ; 3 decrement anschlag
014A   295A               M     goto    $+16               ; 4 pnoteend   
                          M 
                          M     ; bsf    note,n_haltebit    ; 4 haltemodus
                          M     ; in den haltemodus
                          M 
014B   1046               M     bcf    note10, n_onbit  ; 5
                          M 
                          M     ;bcf     STATUS,C       ; Index = nr * 2
                          M     ;rlf     notenr, f      ; fuer vars und SetPort2, ClearPort2
014C   2007               M     call ClearPort2
                          M     
014D   00A7               M     movwf    relaisnr    
014E   03A7               M     decf     relaisnr, f
014F   03A7               M     decf     relaisnr, f
0150   0827               M     movfw    relaisnr
0151   203A               M     call    SetPort2
                          M     
                          M     ; set note +1
                          M 
0152   295A               M     goto   $+8 ; pnoteend     ; 5
                          M 
                          M ;pnoteneu
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 23
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0153   1D46               M     btfss  note10, n_neubit  ; 4
0154   295A               M     goto   $+6 ; pnoteend    ; 5
                          M 
0155   1446               M     bsf    note10, n_onbit  ; 5
0156   1146               M     bcf    note10, n_neubit ; 6
                          M 
0157   1003               M     bcf     STATUS,C       ; Index = nr * 2
0158   0DAF               M     rlf     notenr, f      ; fuer vars und SetPort2, ClearPort2
                          M 
0159   203A               M     call   SetPort2         ; 9
                          M ; pnoteend
                      00116      play_note note11, puls11, 46
                          M 
015A   302E               M         movlw   46                ; 1 relais 1
                          M    
015B   1C48               M         btfss   note11, n_onbit   ; 2 note ein ?
015C   2967               M         goto    $+11              ; 3 pnoteneu -> nein weiter
                          M 
015D   0BC7               M     decfsz  puls11, f         ; 3 decrement anschlag
015E   296E               M     goto    $+16               ; 4 pnoteend   
                          M 
                          M     ; bsf    note,n_haltebit    ; 4 haltemodus
                          M     ; in den haltemodus
                          M 
015F   1048               M     bcf    note11, n_onbit  ; 5
                          M 
                          M     ;bcf     STATUS,C       ; Index = nr * 2
                          M     ;rlf     notenr, f      ; fuer vars und SetPort2, ClearPort2
0160   2007               M     call ClearPort2
                          M     
0161   00A7               M     movwf    relaisnr    
0162   03A7               M     decf     relaisnr, f
0163   03A7               M     decf     relaisnr, f
0164   0827               M     movfw    relaisnr
0165   203A               M     call    SetPort2
                          M     
                          M     ; set note +1
                          M 
0166   296E               M     goto   $+8 ; pnoteend     ; 5
                          M 
                          M ;pnoteneu
0167   1D48               M     btfss  note11, n_neubit  ; 4
0168   296E               M     goto   $+6 ; pnoteend    ; 5
                          M 
0169   1448               M     bsf    note11, n_onbit  ; 5
016A   1148               M     bcf    note11, n_neubit ; 6
                          M 
016B   1003               M     bcf     STATUS,C       ; Index = nr * 2
016C   0DAF               M     rlf     notenr, f      ; fuer vars und SetPort2, ClearPort2
                          M 
016D   203A               M     call   SetPort2         ; 9
                          M ; pnoteend
                      00117 ;     play_note note12, puls12, 48
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 24
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00118 ;     play_note note13, puls13, 26
                      00119 ;     play_note note14, puls14, 28
                      00120 ;     play_note note15, puls15, 30
                      00121 ;     play_note note16, puls16, 32
                      00122 ;     play_note note17, puls17, 34
                      00123 ;     play_note note18, puls18, 36
                      00124 ;     play_note note19, puls19, 38
                      00125 ;     play_note note20, puls20, 40
                      00126 ;     play_note note21, puls21, 42
                      00127 ;     play_note note22, puls22, 44
                      00128 ;     play_note note23, puls23, 46
                      00129 
                      00130 ;--- timer
016E                  00131 time_tick       ;  0.4ms *256 = 102,4ms
016E   0BAA           00132         decfsz  timecount0, f   ; count timer
016F   2975           00133         goto time_end           ; notreached -> end
                      00134         
                      00135   
                      00136 ; -------------- DEBUG relais 4 dauertest ------------
                      00137 ;    btfss   timecount1,4
                      00138 ;    goto      $+2
                      00139 ;    bcf REL11    
                      00140 ;    btfsc   timecount1,1
                      00141 ;    goto $+2
                      00142 ;    bsf REL11 
                      00143 ; ------------------------------------------------------
                      00144 
                      00145 ; ---------- Save off wenn no life bit -----------------
0170                  00146 time_unit       
                      00147 
0170   0BAB           00148         decfsz  timecount1, f ; count timer 102,4ms * 256 = 26,2144 sec
0171   2975           00149         goto time_end             ; notreached -> end
                      00150     ; --- do some --- noteonoffs her
0172   1C2C           00151     btfss LIVEBIT
0173   2262           00152     call all_notes_off
0174   102C           00153     bcf  LIVEBIT
                      00154 ; ------------------------------------------------------
                      00155 
0175                  00156 time_end
                      00157 
                      00158 
0175                  00159 IntEnd                          ; -- Restore the Context Registers
                      00160 ; ---- debug out on REL0 ist 20MHz takt ---
                      00161         CDEBUGPIN1
                      00162 
                      00163 ;       movf   _pclath, w       ; only need if code > 1 Page
                      00164 ;       movwf  PCLATH
0175   0822           00165         movf   _fsr, w
0176   0084           00166         movwf  FSR
0177   0821           00167         movf   _status, w
0178   0083           00168         movwf  STATUS
0179   0EA0           00169         swapf   _w, f
017A   0E20           00170         swapf   _w, w
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 25
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00171 
017B   0009           00172         retfie
                      00173 ;       return
                      00174 
                      00059         include "parser.inc"
                      00001 ; autoklavier
                      00002 ; algo 2003
                      00003 ; play notes in main or interrupt:
                      00004 
                      00005 ; --- Parse input which is in w
017C                  00006 parse_input   
                      00007 
017C   00AE           00008     movwf inbyte   ; store in inbyte
                      00009 
017D   142C           00010     bsf   LIVEBIT  ; mark input as alive 
                      00011                    ; after 26sec marked dead und another 26sec 
                      00012                    ; all notes off
                      00013 
017E   1FAE           00014     btfss inbyte,status_bit ; Status Byte
017F   298F           00015         goto  data_received     ; no -> data_in
                      00016 
0180   10AC           00017     bcf   DATAVALID         ; Data input not valid any more
                      00018  
0181   3970           00019         andlw ADDR_MASK         ; compare address of board
0182   022D           00020         subwf addresse,w
0183   1D03           00021         btfss STATUS,Z
0184   29A8           00022         goto parse_end          ; -> not us -> end  
                      00023         
0185   082E           00024     movfw inbyte           ; our note ,
0186   390F           00025         andlw NOTENNRMASK      ; mask nummer 
0187   00AF           00026     movwf notenr           ; and remember
0188   3C0B           00027         sublw  11              ; im notenbereich ?
0189   1C03           00028     btfss STATUS,C         ; (if Carry clear result negative !!!)
018A   29A8           00029     goto  parse_end        ; negativ -> not a note
                      00030 
018B   1003           00031     bcf     STATUS,C       ; Index = nr * 2
018C   0DAF           00032     rlf     notenr, f      ; fuer vars und SetPort2, ClearPort2
                      00033     
018D   14AC           00034         bsf  DATAVALID         ; naechstes Datum velocity fuer diese note
018E   29A8           00035     goto parse_end         ; das wars 
                      00036 
018F                  00037 data_received             ; ------ DATA
018F   1CAC           00038     btfss DATAVALID       ; wir warten auf keine daten
0190   29A8           00039     goto parse_end        ; not valid warte auf neues Datum
                      00040 
0191   10AC           00041     bcf   DATAVALID       ; verarbeite datum
                      00042                           
0192   1903           00043     btfsc  STATUS,Z       ; Velocity nicht null 
0193   299F           00044         goto  note_off        ; -> nein note aus
                      00045 
0194                  00046 note_on
0194   3E05           00047     addlw  MINIMUM_VEL   ; Minimum velocity eg.5
0195   00B0           00048     movwf  velo          ; merke velocity
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 26
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0196   3031           00049     movlw  LOW puls0     ; Puls0 adresse 
0197   0084           00050         movwf  FSR           ; laden
0198   082F           00051     movfw  notenr        ; addiere notenindex  
0199   0784           00052     addwf  FSR,f         ; index 
019A   0830           00053         movfw  velo          ; velo holen
019B   0080           00054     movwf  INDF          ; in den puls = spielen
                      00055 
019C   0A84           00056     incf    FSR, f        ; notenstatus = puls+1
019D   1500           00057     bsf     INDF, n_neubit ; spielen
                      00058 
019E   29A8           00059     goto parse_end        ; warte auf neuen status
                      00060 
                      00061 
019F                  00062 note_off                    ; ---------- Note aus
                      00063 
019F   3032           00064     movlw   LOW note0       ; note0 = variablenblock start bei note
01A0   0084           00065         movwf   FSR             ; hinzuaddieren
01A1   082F           00066     movfw   notenr          ; notenindex (2*nr)
01A2   0784           00067     addwf   FSR, f
                      00068 
                      00069 ; bei start mit puls, jedoch unoetig
                      00070 ;    clrf    INDF            ; clrf puls    
                      00071 ;    incf    FSR, f        ; notenstatus = puls+1
                      00072 
01A3   0180           00073     clrf    INDF            ; clrf note    
                      00074 
01A4   082F           00075     movfw   notenr          ; notennr (= 2*index)
                      00076    
                      00077     ;bcf     STATUS,C       ; Index = nr * 2 (gesamt * 4)
                      00078     ;rlf     notenr, f      ; fuer vars und SetPort2, ClearPort2
01A5   2007           00079     call    ClearPort2     ; Port zturuecksetzen
                      00080 
01A6   3E02           00081     addlw   2      ; und haltemoment
                      00082     ;incf    notenr, f
01A7   2007           00083     call    ClearPort2      ; Port zturuecksetzen
                      00084          
                      00085                             ; falls in high phase 
                      00086     ;;goto parse_end
                      00087 
01A8                  00088 parse_end
01A8   0008           00089         return
                      00060     include "rs232.inc"
                      00001 ;   RC7 - Serial Receive Pin
                      00002 ;   RC6 - Serial Transmit Pin
                      00003 ;
                      00004 ; Baudrate angeblich SBRG= Fosc/(Rate*16*[4**(1-BRGH)])-1
                      00005 
                      00006 ; Baurate = 20*10^6/(115200 * 16 [4^0]) - 1 = 9,80 -> gewaehlt 10
                      00007 #define BAUD_RATE 10
                      00008 
                      00009 ; baudrate = 20*10^6/(57600 * 16 [4^0]) - 1 = 20,7 -> gewaehlt 21
                      00010 ;#define BAUD_RATE 21
                      00011 
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 27
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00012 ;mit BRGH = 1 (High Speed)
                      00013 
01A9                  00014 rs_init 
01A9   1683           00015         bsf    STATUS, RP0            ;  Enable the Serial Port
01AA   3024           00016         movlw  (1 << TXEN) |(1<<BRGH) ;  Enable Serial Transmission
01AB   0098           00017         movwf  TXSTA ^ 0x080          ;  0x26
01AC   300A           00018         movlw  BAUD_RATE              ;  Baudrate
01AD   0099           00019         movwf  SPBRG ^ 0x080
01AE   1283           00020         bcf    STATUS, RP0
01AF   3090           00021         movlw  (1 << SPEN) | (1 << CREN) ; 0x90
01B0   0098           00022         movwf  RCSTA                  ;  Enable Serial I/O
                      00023 
                      00024     ; IRQ ENABLEN
01B1   308C           00025         MOVLW   PIE1    ; get adress for periphial irq's
01B2   0084           00026         MOVWF   FSR     ; setup fsr
01B3   1680           00027         BSF     INDF,RCIE ; enable reciever irq
01B4   170B           00028         BSF     INTCON,PEIE ; and periphial irq must also be enabled
                      00029 
01B5   0008           00030         return
                      00031 
                      00032 ;rs_read   ; not used direcxt in code
                      00033 ;       btfss   PIR1, RCIF          ;  Wait for Received Character Set
                      00034 ;       goto    rs_read             ;   - Nothing There
                      00035 ;       movf    RCREG, w            ;  Get the Received Character
                      00036 ;       bcf     PIR1, RCIF          ;  Clear the Character Present Flag
                      00037 ;       return
                      00038 
                      00039 ;rs_write
                      00040 ;       movwf  TXREG                  ;  Send the Character
                      00041 ;       return
                      00042 
                      00043 ; -------------------- Seriell in
01B6                  00044 clear_rs                      ; empty seriell buffer in chip
01B6   1E8C           00045         btfss   PIR1, RCIF        ;  Wait for Received Character Set
01B7   0008           00046     return                    ;   - Nothing There
                      00047 
01B8   081A           00048     movfw   RCREG             ;  Get the Received Character
01B9   128C           00049     bcf     PIR1, RCIF        ;  Clear the Character Present Flag
01BA   29B6           00050         goto    clear_rs   
                      00051 
                      00052 
                      00053 
                      00061 
                      00062 ; 5.) Main Code
                      00063 
01BB                  00064 Start
01BB   221B           00065         call ports_init
01BC   224C           00066     call init_adresse
01BD   21A9           00067         call rs_init
01BE   21B6           00068     call clear_rs
                      00069 
                      00070 ; --------  MAIN LOOP if testmode ------
01BF                  00071 Loop
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 28
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00072 
                      00073 ;---  call SerialIn   ; Seriellen Eingang abfragen
                      00074 ;---  now a s interrupt
                      00075     
01BF   1885           00076         btfsc TESTVALID
01C0   29BF           00077         goto Loop
                      00078 
01C1   21CE           00079     call TestTaste  ; Testtaste, Nexttaste abfragen
01C2   29BF           00080     goto Loop
                      00081 
                      00082 ; --------- for debug without serint
01C3                  00083 SerialIn
                      00084 
01C3   1E8C           00085         btfss   PIR1, RCIF         ;  Wait for Received Character Set
01C4   0008           00086     return                     ;   - Nothing There
                      00087 
01C5   081A           00088     movfw   RCREG              ;  Get the Received Character
01C6   128C           00089     bcf     PIR1, RCIF         ;  Clear the Character Present Flag
                      00090 
01C7   1C98           00091     btfss RCSTA, OERR          ; overrun ??? 
01C8   29CC           00092         goto  ser_err_end          ; no -> Process Data
                      00093     
01C9   1218           00094     bcf  RCSTA, CREN
01CA   1618           00095     bsf  RCSTA, CREN
                      00096 
01CB   29C3           00097         goto SerialIn                           ; if overrun data not valid
                      00098 
01CC                  00099 ser_err_end
                      00100 
01CC   217C           00101     call parse_input
01CD   29C3           00102         goto SerialIn
                      00103 
                      00104 ; -------------------- TestTaste
01CE                  00105 TestTaste
01CE   1D85           00106         btfss   TTEST         ; Testtaste ?
01CF   29D2           00107         goto    TasteTest     ; bedienen
                      00108 
                      00109                           ; Testtaste nicht gedrueckt
01D0   21F2           00110     call    TasteTestOff  ; zuerst ausschalten
01D1   2A0C           00111         goto    NextTaste     ; dann NextTaste bearbeiten
                      00112 
01D2                  00113 TasteTest
01D2   1825           00114     btfsc   STEST
01D3   0008           00115     return
                      00116 
                      00117     tastenr_to_fsr note0
01D4   0824               M         movfw   tastennr
01D5   0084               M     movwf   FSR
01D6   0384               M         decf    FSR, f          ; 1-24 -> 0-23
01D7   1003               M     bcf     STATUS,C        ; * 2
01D8   0D84               M     rlf     FSR, f
01D9   3032               M     movlw   LOW note0       ; Puls0 adresse 
01DA   0784               M         addwf   FSR, f          ; hinzuaddieren
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 29
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01DB   1800           00118     btfsc   INDF, n_onbit    ; note nicht on ?
01DC   0008           00119     return       ; nein -> return ohne STEST setzen damit timeout
                      00120 
                      00121     ; ---------- Wert von poti ---------
                      00122     ; spiele Note
01DD   151F           00123         bsf             ADCON0, GO     ; start adc
01DE   191F           00124         btfsc   ADCON0, GO     ; wait for value
01DF   29DE           00125         goto    $ - 1
01E0   081E           00126     movfw   ADRESH         ; read value
01E1   00A6           00127     movwf   poti
01E2   1003           00128     bcf     STATUS, C
01E3   0CA6           00129     rrf     poti, f
01E4   0AA6           00130     incf    poti, f
                      00131     
                      00132 ; ------- note spielen 
                      00133     tastenr_to_fsr puls0
01E5   0824               M         movfw   tastennr
01E6   0084               M     movwf   FSR
01E7   0384               M         decf    FSR, f          ; 1-24 -> 0-23
01E8   1003               M     bcf     STATUS,C        ; * 2
01E9   0D84               M     rlf     FSR, f
01EA   3031               M     movlw   LOW puls0       ; Puls0 adresse 
01EB   0784               M         addwf   FSR, f          ; hinzuaddieren
                      00134 
01EC   0826           00135         movfw   poti            ; potiwert
01ED   0080           00136     movwf   INDF            ; in den puls
                      00137 
01EE   0A84           00138     incf    FSR, f            ; note = puls+1
01EF   1500           00139     bsf     INDF, n_neubit ; spielen
                      00140 
01F0   1425           00141     bsf     STEST
01F1   0008           00142         return
                      00143 
01F2                  00144 TasteTestOff
01F2   1C25           00145     btfss   STEST
01F3   0008           00146     return
                      00147 
01F4   1025           00148     bcf     STEST
                      00149         ; noteoff
                      00150     tastenr_to_fsr 0
01F5   0824               M         movfw   tastennr
01F6   0084               M     movwf   FSR
01F7   0384               M         decf    FSR, f          ; 1-24 -> 0-23
01F8   1003               M     bcf     STATUS,C        ; * 2
01F9   0D84               M     rlf     FSR, f
01FA   3000               M     movlw   LOW 0           ; Puls0 adresse 
01FB   0784               M         addwf   FSR, f          ; hinzuaddieren
01FC   0804           00151     movfw   FSR
                      00152 
01FD   1003           00153     bcf     STATUS,C       ; Index = nr * 2 (gesamt * 4)
01FE   0DAF           00154     rlf     notenr, f      ; fuer vars und SetPort2, ClearPort2
01FF   2007           00155     call    ClearPort2
0200   0AAF           00156     incf    notenr, f      ; und haltemoment
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 30
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0201   0AAF           00157     incf    notenr, f
0202   2007           00158     call    ClearPort2     ; Port zturuecksetzen
                      00159 
                      00160     tastenr_to_fsr note0
0203   0824               M         movfw   tastennr
0204   0084               M     movwf   FSR
0205   0384               M         decf    FSR, f          ; 1-24 -> 0-23
0206   1003               M     bcf     STATUS,C        ; * 2
0207   0D84               M     rlf     FSR, f
0208   3032               M     movlw   LOW note0       ; Puls0 adresse 
0209   0784               M         addwf   FSR, f          ; hinzuaddieren
020A   0180           00161     clrf    INDF           ; clrf note
                      00162 
020B   0008           00163         return
                      00164 
                      00165 ; -------------------- nexttaste
020C                  00166 NextTaste
020C   1E05           00167         btfss   TNEXT     
020D   2A0F           00168         goto    TasteNext
020E   2A17           00169     goto    NTasteNext
                      00170 
020F                  00171 TasteNext
                      00172 
020F   18A5           00173     btfsc SNEXT
0210   0008           00174     return
                      00175  
0211   14A5           00176     bsf     SNEXT        ; Taste gedrueckt
                      00177 
0212   0BA4           00178     decfsz  tastennr,f   ; decrement Tastennr
0213   0008           00179     return                ; wenn nicht null return
                      00180                        
0214   300C           00181     movlw   12           ; sonst beginne bei 12
0215   00A4           00182     movwf   tastennr
0216   0008           00183         return
                      00184 
0217                  00185 NTasteNext
                      00186 
0217   1CA5           00187     btfss   SNEXT        ; taste schon losgelassen ?
0218   0008           00188     return               ; -> dann passts
                      00189   
0219   10A5           00190     bcf     SNEXT        ; merke zustand
021A   0008           00191         return
                      00192 
                      00193        ; --------------------  INITs -----------------
                      00194 
021B                  00195 ports_init
021B   1303           00196         bcf      STATUS, RP1    ; Bank 0
021C   1283           00197         bcf      STATUS, RP0    ; am Start
021D   018B           00198     clrf INTCON         ; sicher dass kein interrupt
021E   018C           00199         CLRF    PIR1        ; clear periphial irq's
021F   018D           00200         CLRF    PIR2        ; ditto
                      00201         
                      00202         ; make sure all individual irq's are disabled
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 31
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0220   308C           00203         MOVLW   PIE1    ; get adress for periphial irq enable
0221   0084           00204         MOVWF   FSR     ; setup fsr
0222   0180           00205         CLRF    INDF    ; and clear irq enable flags
                      00206 
0223   308D           00207         MOVLW   PIE2    ; get adress for second periphial irq enable
0224   0084           00208         MOVWF   FSR     ; setup fsr
0225   0180           00209         CLRF    INDF    ; and clear irq enable flags
                      00210 
                      00211         ; --- Initial state before tristating outs ??? ---
                      00212 
0226   2254           00213         call ClearRelais
                      00214 
                      00215         ; --- Init Button + timer ----
0227   3001           00216     movlw   1           ; beginne bei 1
0228   00A4           00217     movwf   tastennr
0229   1025           00218     bcf     STEST
022A   10A5           00219     bcf     SNEXT
022B   01A6           00220     clrf    poti
                      00221 
022C   01AD           00222         clrf    addresse
                      00223 
022D   3004           00224     movlw   PRE_COUNT
022E   00A9           00225     movwf   precount
022F   01AA           00226     clrf    timecount0
0230   01AB           00227     clrf    timecount1
                      00228 
0231   2262           00229     call all_notes_off
                      00230 
                      00231 ;    movlw   0
                      00232 ;    movwf   hindex
                      00233 ;    call    SetHaltepuls
                      00234 ;     call    hpuls4
                      00235 
                      00236         ; ------------- TRISTATE and IO-Pins Settings -------------
0232   1283           00237         bcf     STATUS, RP0             ; Bank0
                      00238 
                      00239     ; 10 FSC/64, 000 ADchannel0, 0 noconv, -, AD off 
                      00240     #define ADCON0_OFF B'10000000'
                      00241     #define ADCON0_ON  (ADCON0_OFF | 0x1)
                      00242 
                      00243 ;       movlw   ADCON0_OFF      ; NO AD
0233   3081           00244         movlw   ADCON0_ON       ; AD
0234   009F           00245         movwf   ADCON0
                      00246 
                      00247     ; ---------- PORT A and associated Pins ---------
0235   1683           00248         bsf     STATUS, RP0             ; Bank1 
                      00249 
                      00250     ; Init Analogconverter    
                      00251     ; leftalgined 0, 1 FSC/64, -, -, MODE only AN0 analog
0236   300E           00252         movlw   B'00001110'     ; 
0237   009F           00253         movwf   ADCON1^0x080
                      00254 
                      00255     ; CMCON C2OUT, C1OUT, C2INV, C1INV, CM
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 32
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00256     ; CRVCON: CVRON, CVROE
                      00257 
                      00258         ; Port A -,-, 000 Outputs, 11111 Inputs 
0238   301F           00259         movlw   B'00011111' & DEBUGTRIS
0239   0085           00260         movwf   TRISA^0x080
                      00261 
                      00262     ; ---------- PORT B and associated Pins ---------
                      00263 
                      00264     ; OPTIONREG  RBPU, INETDG (for rb6,7 pgm)
                      00265 
                      00266         ; Port B        000000 6 Outputs,  2-Inputs (ICD)
023A   3000           00267         movlw   B'00000000'
023B   0086           00268         movwf   TRISB^0x080
                      00269 
                      00270 
                      00271     ; ---------- PORT C and associated REGs ---------    
                      00272 
                      00273         ; PORTC 10 (USART), 000000 6-outputs
023C   3080           00274         movlw   B'10000000'
023D   0087           00275         movwf   TRISC^0x080
                      00276         
                      00277         ; PORTD all Outputs
023E   3000           00278         movlw   B'00000000'
023F   0088           00279         movwf   TRISD^0x080
                      00280 
                      00281         ; PORTE all 3 Outputs
0240   1009           00282         bcf     TRISE^0x080,0
0241   1089           00283         bcf     TRISE^0x080,1
0242   1109           00284         bcf     TRISE^0x080,2
                      00285 
                      00286 
                      00287 ; ------ Setup timer --------------
                      00288         ; Option =  Prescale
                      00289         ; + RBPU   - no pullups on PortB 
                      00290         ; + /PSA   - Prescaler to Timer0 (not WDT)
                      00291         ; + /TOSE  - Timer src edge not used
                      00292         ; + /T0CS  - Timer Clk source intern (CLK/4) 
                      00293         ; + /INTEDG sets button int to falling edge
                      00294 
0243   3080           00295         movlw   PRE_SCALE | (1 << NOT_RBPU) | USE_NPSA
                      00296     ;movlw   (1 << NOT_RBPU) | (1 << PSA) 
0244   0081           00297         movwf   OPTION_REG^0x080
                      00298 
0245   1283           00299         bcf     STATUS, RP0             ; Bank 0
0246   300F           00300         movlw   TMR0_LOAD       ; load timer
0247   0081           00301         movwf   TMR0
                      00302 
0248   2254           00303         call ClearRelais
                      00304 
                      00305         ; --- Interrupts enable (gie)+Timer0+RB0+RB4:7 ---
                      00306 ;       movlw  (1<<GIE)|(1<<T0IE)|(1<<INTE)|(1<<RBIE)
                      00307 ;       movlw  (1<<GIE)|(1<<INTE)|(1<<RBIE) ; no timer
0249   30A0           00308         movlw  (1<<GIE)|(1<<T0IE) ; only timer
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 33
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00309 ;       movlw   0x00 
024A   008B           00310         movwf   INTCON
                      00311 
024B   0008           00312         return
                      00313 
                      00314              ; Adresse Einlesen
024C                  00315 init_adresse
                      00316              ; Adressbits fuer decodierung festlegen !!!
024C   01AD           00317     clrf     addresse
024D   1905           00318     btfsc    TADDR1
024E   162D           00319     bsf      ADDR1_BIT
024F   1985           00320     btfsc    TADDR2
0250   16AD           00321     bsf      ADDR2_BIT
0251   1A05           00322     btfsc    TADDR3
0252   172D           00323     bsf      ADDR3_BIT
0253   0008           00324     return
                      00325 
                      00326 ; 6) Helpers
                      00327 
                      00328 
0254                  00329 ClearRelais
                      00330 
0254   3017           00331     movlw 23
0255   00A7           00332     movwf relaisnr
0256   2005           00333         call     ClearPort     ; wenn nicht null dann ausfuehren    
0257   0BA7           00334         decfsz   relaisnr, f   ; decr nummer 
0258   2A56           00335     goto     $-2           ; loop 
0259   2005           00336         call     ClearPort     ; auch null ausfuehren   
025A   0008           00337     return                 ; fertig
                      00338 
025B                  00339 SetRelais
                      00340 
025B   3017           00341     movlw 23
025C   00A7           00342     movwf relaisnr
025D   2005           00343         call     ClearPort     ; wenn nicht null dann ausfuehren    
025E   0BA7           00344         decfsz   relaisnr, f   ; decr nummer 
025F   2A5D           00345     goto     $-2           ; loop 
0260   2005           00346         call     ClearPort     ; auch null ausfuehren   
0261   0008           00347     return                 ; fertig
                      00348 
0262                  00349 all_notes_off
                      00350 
0262   3031           00351     movlw   LOW puls0
0263   0084           00352     movwf   FSR
0264   300C           00353     movlw   12
0265   00A8           00354     movwf   nindex
                      00355    
0266                  00356 clear_notes
0266   0180           00357     clrf    INDF  ; puls++
0267   0A84           00358     incf    FSR, f
0268   0180           00359     clrf    INDF  ; note++
0269   0A84           00360     incf    FSR, f
026A   0BA8           00361     decfsz  nindex, f
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 34
main.asm   - Autoklavier Main Test

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

026B   2A66           00362     goto    clear_notes
                      00363 
026C   2254           00364     call    ClearRelais
026D   0008           00365         return
                      00366 
                      00367  ; ------------- end --------------------
                      00368         end
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 35
main.asm   - Autoklavier Main Test

SYMBOL TABLE
  LABEL                             VALUE 

ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ADCON0                            0000001F
ADCON0_OFF                        B'10000000'
ADCON0_ON                         (ADCON0_OFF | 0x1)
ADCON1                            0000009F
ADCS0                             00000006
ADCS1                             00000007
ADDEN                             00000003
ADDR1_BIT                         addresse,addr1_bit
ADDR2_BIT                         addresse,addr2_bit
ADDR3_BIT                         addresse,addr3_bit
ADDRVALID                         PORTA,addrvalid
ADDR_MASK                         (1<<addr1_bit)|(1<<addr2_bit)|(1<<addr3_bit)
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADRESH                            0000001E
ADRESL                            0000009E
BAUD_RATE                         10
BCLIE                             00000003
BCLIF                             00000003
BF                                00000000
BRGH                              00000002
C                                 00000000
C1INV                             00000004
C1OUT                             00000006
C2INV                             00000005
C2OUT                             00000007
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCP2CON                           0000001D
CCP2IE                            00000000
CCP2IF                            00000000
CCP2M0                            00000000
CCP2M1                            00000001
CCP2M2                            00000002
CCP2M3                            00000003
CCP2X                             00000005
CCP2Y                             00000004
CCPR1H                            00000016
CCPR1L                            00000015
CCPR2H                            0000001C
CCPR2L                            0000001B
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 36
main.asm   - Autoklavier Main Test

SYMBOL TABLE
  LABEL                             VALUE 

CDEBUGPIN                         
CDEBUGPIN1                        
CHS0                              00000003
CHS1                              00000004
CHS2                              00000005
CIS                               00000003
CKE                               00000006
CKP                               00000004
CM0                               00000000
CM1                               00000001
CM2                               00000002
CMCON                             0000009C
CMIE                              00000006
CMIF                              00000006
CREN                              00000004
CSRC                              00000007
CVR0                              00000000
CVR1                              00000001
CVR2                              00000002
CVR3                              00000003
CVRCON                            0000009D
CVREN                             00000007
CVROE                             00000006
CVRR                              00000005
ClearPort                         00000005
ClearPort2                        00000007
ClearRelais                       00000254
D                                 00000005
DATAVALID                         systemstatus,datavalid
DATAWAIT                          systemstatus,datawait
DATA_ADDRESS                      00000005
DAUERTEST                         schalter,4
DC                                00000001
DEBUGPIN                          DEBUGPORT, debugpin
DEBUGPIN1                         DEBUGPORT1, debugpin1
DEBUGPORT                         PORTA
DEBUGPORT1                        PORTA
DEBUGTRIS                         ~(0)
D_A                               00000005
EEADR                             0000010D
EEADRH                            0000010F
EECON1                            0000018C
EECON2                            0000018D
EEDATA                            0000010C
EEDATH                            0000010E
EEIE                              00000004
EEIF                              00000004
EEPGD                             00000007
F                                 00000001
FERR                              00000002
FSR                               00000004
GCEN                              00000007
GIE                               00000007
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 37
main.asm   - Autoklavier Main Test

SYMBOL TABLE
  LABEL                             VALUE 

GO                                00000002
GO_DONE                           00000002
I2C_DATA                          00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
IBF                               00000007
IBOV                              00000005
INDF                              00000000
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IRP                               00000007
Int                               0000006B
IntEnd                            00000175
LIVEBIT                           systemstatus,livebit
Loop                              000001BF
MINIMUM_VEL                       5
NOTENNRMASK                       B'00001111'
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BO                            00000000
NOT_BOR                           00000000
NOT_DONE                          00000002
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RC8                           00000006
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NOT_TX8                           00000006
NOT_W                             00000002
NOT_WRITE                         00000002
NTasteNext                        00000217
NextTaste                         0000020C
OBF                               00000006
OERR                              00000001
OPTION_REG                        00000081
P                                 00000004
PCFG0                             00000000
PCFG1                             00000001
PCFG2                             00000002
PCFG3                             00000003
PCL                               00000002
PCLATH                            0000000A
PCON                              0000008E
PEIE                              00000006
PEN                               00000002
PIE1                              0000008C
PIE2                              0000008D
PIR1                              0000000C
PIR2                              0000000D
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 38
main.asm   - Autoklavier Main Test

SYMBOL TABLE
  LABEL                             VALUE 

PORTA                             00000005
PORTB                             00000006
PORTC                             00000007
PORTD                             00000008
PORTE                             00000009
PR2                               00000092
PRE_COUNT                         (4)
PRE_SCALE                         B'000'
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
PSPIE                             00000007
PSPIF                             00000007
PSPMODE                           00000004
R                                 00000002
RBIE                              00000003
RBIF                              00000000
RC8_9                             00000006
RC9                               00000006
RCD8                              00000000
RCEN                              00000003
RCIE                              00000005
RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
READ_WRITE                        00000002
REL0                              PORTA,rel0
REL1                              PORTE,rel1
REL10                             PORTD,rel10
REL11                             PORTD,rel11
REL12                             PORTC,rel12
REL13                             PORTC,rel13
REL14                             PORTD,rel14
REL15                             PORTD,rel15
REL16                             PORTD,rel16
REL17                             PORTD,rel17
REL18                             PORTB,rel18
REL19                             PORTB,rel19
REL2                              PORTE,rel2
REL20                             PORTB,rel20
REL21                             PORTB,rel21
REL22                             PORTB,rel22
REL23                             PORTB,rel23
REL3                              PORTE,rel3
REL4                              PORTC,rel4
REL5                              PORTC,rel5
REL6                              PORTD,rel6
REL7                              PORTD,rel7
REL8                              PORTC,rel8
REL9                              PORTC,rel9
RESET                             00000000
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 39
main.asm   - Autoklavier Main Test

SYMBOL TABLE
  LABEL                             VALUE 

RP0                               00000005
RP1                               00000006
RSEN                              00000001
RX9                               00000006
RX9D                              00000000
R_W                               00000002
S                                 00000003
SDEBUGPIN                         
SDEBUGPIN1                        
SEN                               00000000
SMP                               00000007
SNEXT                             schalter,1
SPBRG                             00000099
SPEN                              00000007
SREN                              00000005
SSPADD                            00000093
SSPBUF                            00000013
SSPCON                            00000014
SSPCON2                           00000091
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000094
STATUS                            00000003
STATUS_BIT                        addresse,status_bit
STEST                             schalter,0
SYNC                              00000004
SerialIn                          000001C3
SetPort                           00000038
SetPort2                          0000003A
SetRelais                         0000025B
Start                             000001BB
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1INSYNC                          00000002
T1OSCEN                           00000003
T1SYNC                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000012
TADDR1                            PORTA,taddr1
TADDR2                            PORTA,taddr2
TADDR3                            PORTA,taddr3
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 40
main.asm   - Autoklavier Main Test

SYMBOL TABLE
  LABEL                             VALUE 

TESTVALID                         PORTA,testvalid
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TMR0_LOAD                         (256 - 241)
TMR1CS                            00000001
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TNEXT                             PORTA,tnext
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TPOTI                             PORTA,tpoti
TRISA                             00000085
TRISB                             00000086
TRISC                             00000087
TRISD                             00000088
TRISE                             00000089
TRISE0                            00000000
TRISE1                            00000001
TRISE2                            00000002
TRMT                              00000001
TTEST                             PORTA,ttest
TX8_9                             00000006
TX9                               00000006
TX9D                              00000000
TXD8                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
TXSTA                             00000098
TasteNext                         0000020F
TasteTest                         000001D2
TasteTestOff                      000001F2
TestTaste                         000001CE
UA                                00000001
USE_NPSA                          (0)
VALIDMASK                         (ADDR_MASK | (1 << status_bit))
W                                 00000000
WCOL                              00000007
WR                                00000001
WREN                              00000002
WRERR                             00000003
Z                                 00000002
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 41
main.asm   - Autoklavier Main Test

SYMBOL TABLE
  LABEL                             VALUE 

_BODEN_OFF                        00003FBF
_BODEN_ON                         00003FFF
_CPD_OFF                          00003FFF
_CPD_ON                           00003EFF
_CP_ALL                           00001FFF
_CP_OFF                           00003FFF
_DEBUG_OFF                        00003FFF
_DEBUG_ON                         000037FF
_HS_OSC                           00003FFE
_LP_OSC                           00003FFC
_LVP_OFF                          00003F7F
_LVP_ON                           00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_RC_OSC                           00003FFF
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_WRT_1FOURTH                      00003BFF
_WRT_256                          00003DFF
_WRT_HALF                         000039FF
_WRT_OFF                          00003FFF
_XT_OSC                           00003FFD
__16F877A                         00000001
_fsr                              00000022
_pclath                           00000023
_status                           00000021
_version                          "0.1"
_w                                00000020
addr1_bit                         00000004
addr2_bit                         00000005
addr3_bit                         00000006
addresse                          0000002D
addrvalid                         00000001
all_notes_off                     00000262
clear_notes                       00000266
clear_rs                          000001B6
data_received                     0000018F
datavalid                         00000001
datawait                          00000002
debugpin                          00000001
debugpin1                         00000002
disable_irq                       
enable_irq                        
halte_note                        
haltebit                          0
inbyte                            0000002E
init_adresse                      0000024C
int_serial_rx                     00000072
int_timer                         00000075
livebit                           00000000
n_haltebit                        00000003
n_neubit                          00000002
n_onbit                           00000000
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 42
main.asm   - Autoklavier Main Test

SYMBOL TABLE
  LABEL                             VALUE 

n_pulsbit                         00000001
n_syncbit                         00000004
nindex                            00000028
note0                             00000032
note1                             00000034
note10                            00000046
note11                            00000048
note2                             00000036
note3                             00000038
note4                             0000003A
note5                             0000003C
note6                             0000003E
note7                             00000040
note8                             00000042
note9                             00000044
note_off                          0000019F
note_on                           00000194
notenr                            0000002F
parse_end                         000001A8
parse_input                       0000017C
play_note                         
ports_init                        0000021B
poti                              00000026
pre_tick                          0000007A
precount                          00000029
puls0                             00000031
puls1                             00000033
puls10                            00000045
puls11                            00000047
puls2                             00000035
puls3                             00000037
puls4                             00000039
puls5                             0000003B
puls6                             0000003D
puls7                             0000003F
puls8                             00000041
puls9                             00000043
rel0                              00000005
rel1                              00000000
rel10                             00000002
rel11                             00000003
rel12                             00000004
rel13                             00000005
rel14                             00000004
rel15                             00000005
rel16                             00000006
rel17                             00000007
rel18                             00000000
rel19                             00000001
rel2                              00000001
rel20                             00000002
rel21                             00000003
rel22                             00000004
MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 43
main.asm   - Autoklavier Main Test

SYMBOL TABLE
  LABEL                             VALUE 

rel23                             00000005
rel3                              00000002
rel4                              00000000
rel5                              00000001
rel6                              00000001
rel7                              00000000
rel8                              00000003
rel9                              00000002
relaisnr                          00000027
rs_init                           000001A9
schalter                          00000025
ser_err_end                       000001CC
status_bit                        00000007
systemstatus                      0000002C
taddr1                            00000002
taddr2                            00000003
taddr3                            00000004
tastennr                          00000024
tastenr_to_fsr                    
testvalid                         00000001
time_end                          00000175
time_tick                         0000016E
time_unit                         00000170
timecount0                        0000002A
timecount1                        0000002B
tnext                             00000004
tpoti                             00000000
ttest                             00000003
velo                              00000030
w_to_fsr                          


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)

0000 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0040 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0080 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
00C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0100 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0140 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0180 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
01C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0200 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0240 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXX-- ----------------

All other memory blocks unused.

Program Memory Words Used:   622
Program Memory Words Free:  7570


MPASM 03.30 Released                                 MAIN.ASM   10-18-2004  10:11:39         PAGE 44
main.asm   - Autoklavier Main Test




Errors   :     0
Warnings :     0 reported,     0 suppressed
Messages :     0 reported,     0 suppressed

